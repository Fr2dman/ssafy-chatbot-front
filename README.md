# MediMind - AI 복약 및 마음 상담 시스템

의약품에 대한 정확하고 안전한 복약 정보를 LLM + RAG 파이프라인을 통해 제공하는 AI 기반 복약 지원 서비스입니다. 사용자는 마음 상담 모드로 변화하여 정서적 안정을 위한 대화를 경험할 수 있습니다.
정부 공인 데이터를 활용하여 병용 금기, 연령별 금기, 임부 금기 등 다양한 정보를 실시간으로 분석하고, 사용자 질문에 맞는 신뢰도 높은 답변을 생성합니다.


## 📌 주요 기능

- 약물 간 상호작용 확인 및 경고
- 연령별/임산부 대상 금기 약물 정보 제공
- 복약 상담/마음 상담 모드 변환
- 한국의약품안전관리원 & DUR 데이터 기반 응답
- RAG 파이프라인 기반 LLM 응답 생성
- 정량(RAGAS), 정성(사용자 만족도) 평가 완료


## 🛠️ 프로젝트 구성

- drug_safety_service-master: FastAPI 백엔드
- ssafy-chatbot-front-main: Parcel 기반 프론트엔드
- 복약도우미 RAG 파이프라인 구축 보고서.pdf


## 👥 팀원 소개

본 프로젝트는 **SSAFY AI 계절학기 과정** 중 팀 프로젝트로 진행되었습니다.

| 이름 | 역할 | 주요 담당 |
|------|------|------------------|
| 가을하늘 | 팀장 / 백엔드 | FastAPI, RAG 파이프라인, DB 구축, LLM 프롬프트 설계, 평가 지표 정리, Fly.io 배포 |
| 이혜민 | 백엔드 | FastAPI, RAG 파이프라인, DB 구축, LLM 프롬프트 설계, 평가 지표 정리, Fly.io 배포 |
| 정지유 | 프론트엔드 | HTML/CSS/JavaScript, Tailwind CSS, Parcel 기반 UI 개발, Vercel 배포, 공공데이터 수집/전처리, 서비스 기획 |
| 정하균 | 프론트엔드 | HTML/CSS/JavaScript, Tailwind CSS, Parcel 기반 UI 개발,, Vercel 배포, 공공데이터 수집/전처리|


## 📂 데이터 출처

| 데이터명 | 출처 |
|----------|------|
| 의약품안전사용서비스(DUR) 의약품 목록 | [건강보험심사평가원 (HIRA)](https://www.data.go.kr/data/15127983/fileData.do) |
| 추가 예정 | 식약처 부작용 신고, 해외 FDA/EMA 데이터, 유전자 기반 정보 등 |


## 📈 성능 평가 결과

| 항목 | 점수 |
|------|------|
| Context Precision | 0.73 |
| Context Recall | 0.76 |
| 사용자 만족도 | 4.3 / 5.0 |


## 🏗️ 시스템 아키텍처

### 전체 시스템 구성도
```
┌─────────────────────────────────────────────────────────────────┐
│                        Frontend (Vercel)                        │
├─────────────────────────────────────────────────────────────────┤
│  • HTML/CSS/JavaScript (Vanilla JS)                             │
│  • Tailwind CSS                                                 │
│  • Parcel (빌드 도구)                                            │
│  • IndexedDB (로컬 저장소)                                        │
└─────────────────────────┬───────────────────────────────────────┘
                          │ HTTP/REST API
                          │
┌─────────────────────────▼───────────────────────────────────────┐
│                      Backend (Fly.io)                           │
├─────────────────────────────────────────────────────────────────┤
│  • FastAPI (Python)                                             │
│  • CORS 미들웨어                                                 │
│  • 2개 엔드포인트: /chat, /assistant                              │
└─────────────────────────┬───────────────────────────────────────┘
                          │
        ┌─────────────────┴─────────────────┐
        │                                   │
        ▼                                   ▼
┌──────────────────┐              ┌──────────────────┐
│   마음 상담 모드   │              │   복약 상담 모드   │
│                  │              │                  │
│  OpenAI API      │              │  RAG Pipeline    │
│  GPT-4o-mini     │              │                  │
└──────────────────┘              └─────────┬────────┘
                                           │
                          ┌────────────────┼────────────────┐
                          │                │                │
                          ▼                ▼                ▼
                   ┌──────────────┐ ┌──────────────┐ ┌──────────────┐
                   │   Upstage    │ │   Pinecone   │ │   LangChain  │
                   │              │ │              │ │              │
                   │ • LLM        │ │ • Vector DB  │ │ • RAG Chain  │
                   │ • Embeddings │ │ • 의약품 지식  │ │ • Retrieval  │
                   └──────────────┘ └──────────────┘ └──────────────┘
```
<img src=".\img\MediMind_System-Architecture.png">

### 데이터 흐름

#### 1. 복약 상담 모드
```
사용자 입력 → 프로필 정보 결합 → 약물 태그 추가 → /assistant API 
→ RAG 파이프라인 → Pinecone 벡터 검색 → Upstage LLM → 전문적 답변
```

#### 2. 마음 상담 모드
```
사용자 입력 → 프로필 정보 결합 → /chat API 
→ OpenAI GPT-4o-mini → 감정적 지원 답변
```

## 🛠️ 기술 스택

### Frontend
| 카테고리 | 기술 | 용도 |
|---------|------|-----|
| **언어** | HTML5, CSS3, JavaScript (ES6+) | 기본 웹 기술 |
| **스타일링** | Tailwind CSS | 유틸리티 우선 CSS 프레임워크 |
| **빌드 도구** | Parcel | 모듈 번들러 및 개발 서버 |
| **상태 관리** | Vanilla JS | 네이티브 JavaScript 상태 관리 |
| **로컬 저장소** | IndexedDB | 브라우저 내 구조화된 데이터 저장 |
| **배포** | Vercel | 정적 사이트 호스팅 |

### Backend
| 카테고리 | 기술 | 용도 |
|---------|------|-----|
| **언어** | Python 3.x | 서버 사이드 개발 |
| **웹 프레임워크** | FastAPI | 고성능 비동기 웹 API 프레임워크 |
| **배포** | Fly.io | 컨테이너 기반 클라우드 플랫폼 |
| **환경 관리** | python-dotenv | 환경 변수 관리 |

### LLM & RAG Pipeline
| 카테고리 | 기술 | 용도 |
|---------|------|-----|
| **LLM (마음상담)** | OpenAI GPT-4o-mini | 감정적 지원 및 일반 대화 |
| **LLM (복약상담)** | Upstage ChatUpstage | 전문적 의약품 상담 |
| **임베딩** | Upstage Embeddings | 텍스트 벡터화 |
| **벡터 DB** | Pinecone | 고성능 벡터 검색 엔진 |
| **RAG 프레임워크** | LangChain | 검색 증강 생성 파이프라인 |
| **데이터 처리** | pandas | 데이터 전처리 및 조작 |

### 데이터베이스 & 저장소
| 카테고리 | 기술 | 용도 |
|---------|------|-----|
| **클라이언트 DB** | IndexedDB | 채팅 기록 및 사용자 프로필 |
| **벡터 DB** | Pinecone | 의약품 지식 벡터 저장 |
| **지식 베이스** | CSV 파일 | 의약품 안전성 문서 |

### 개발 도구
| 카테고리 | 기술 | 용도 |
|---------|------|-----|
| **패키지 관리** | npm (Frontend), pip (Backend) | 의존성 관리 |
| **개발 서버** | Parcel Dev Server, Uvicorn | 로컬 개발 환경 |
| **버전 관리** | Git | 소스 코드 관리 |


## 🏛️ 아키텍처 특징

### 1. 마이크로서비스 아키텍처
- **프론트엔드**: 정적 사이트 (Vercel)
- **백엔드**: API 서버 (Fly.io)
- **AI 서비스**: 외부 AI 플랫폼 (OpenAI, Upstage)
- **데이터**: 벡터 DB (Pinecone)

### 2. 하이브리드 AI 접근법
- **전문성**: RAG 파이프라인으로 의약품 전문 지식 활용
- **감정 지원**: GPT-4o-mini로 자연스러운 대화 지원
- **모드 분리**: 용도에 따른 최적화된 AI 모델 선택

### 3. 확장 가능한 설계
- **모듈식 구조**: 각 컴포넌트 독립적 확장 가능
- **API 중심**: RESTful API로 플랫폼 확장 용이
- **클라우드 네이티브**: 서버리스 및 관리형 서비스 활용

### 4. 사용자 경험 최적화
- **반응형 UI**: 모바일/데스크톱 대응
- **실시간 상호작용**: 즉시 응답 및 로딩 상태 표시
- **로컬 저장**: 오프라인 대화 기록 유지
- **테마 전환**: 복약상담 ↔ 마음상담 원클릭 전환


## 🌐 배포 링크

- 백엔드: https://2025-ssafy-drugai-backend-little-surf-2988.fly.dev  
- 프론트: https://ssafy-chatbot-front.vercel.app


## 🔮 발전 방향

- ✅ 의약품 전체 리스트 DB 제공으로 사용자 선택 편의성 향상
- ✅ 의약품 사진 검색 기능 추가
- ✅ 멀티턴 대화 기능으로 사용자 만족도 증대
- ✅ 맞춤형 복약 캘린더 서비스 제공

---
### RAG 파이프라인 상세
```python
# 검색 설정
search_type='mmr'  # Maximum Marginal Relevance
search_kwargs={"k": 3}  # 상위 3개 문서 검색

# 문서 분할 설정
chunk_size=1000  # 1000자 청크
chunk_overlap=100  # 100자 오버랩

# 벡터 인덱스
dimension=4096  # Upstage 임베딩 차원
metric="cosine"  # 코사인 유사도
```

### 데이터 보안
- **환경 변수**: API 키 및 민감 정보 보호
- **CORS**: 프론트엔드 도메인 허용
- **클라이언트 사이드**: 개인정보 로컬 저장

이 아키텍처는 의료 분야의 전문성과 감정적 지원을 동시에 제공하면서도, 확장 가능하고 유지보수가 용이한 웹 애플리케이션 구조를 구현하고 있습니다.